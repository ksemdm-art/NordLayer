# ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð½Ð° TimeWeb: ÐŸÐ¾ÑˆÐ°Ð³Ð¾Ð²Ð¾Ðµ Ñ€ÑƒÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾

## 1. ÐŸÐ¾ÐºÑƒÐ¿ÐºÐ° Ð´Ð¾Ð¼ÐµÐ½Ð° Ð½Ð° TimeWeb

### Ð¨Ð°Ð³ 1: Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð¸ Ð²Ñ‹Ð±Ð¾Ñ€ Ð´Ð¾Ð¼ÐµÐ½Ð°
1. ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð½Ð° [timeweb.com](https://timeweb.com)
2. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ "Ð”Ð¾Ð¼ÐµÐ½Ñ‹" Ð² Ð²ÐµÑ€Ñ…Ð½ÐµÐ¼ Ð¼ÐµÐ½ÑŽ
3. Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð¶ÐµÐ»Ð°ÐµÐ¼Ð¾Ðµ Ð¸Ð¼Ñ Ð´Ð¾Ð¼ÐµÐ½Ð° Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ÑÑ‚ÑŒ
4. Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¿Ð¾Ð´Ñ…Ð¾Ð´ÑÑ‰ÑƒÑŽ Ð·Ð¾Ð½Ñƒ (.com, .ru, .net Ð¸ Ñ‚.Ð´.)
5. Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð² ÐºÐ¾Ñ€Ð·Ð¸Ð½Ñƒ Ð¸ Ð¾Ñ„Ð¾Ñ€Ð¼Ð¸Ñ‚Ðµ Ð·Ð°ÐºÐ°Ð·

### Ð¨Ð°Ð³ 2: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° DNS
ÐŸÐ¾ÑÐ»Ðµ Ð¿Ð¾ÐºÑƒÐ¿ÐºÐ¸ Ð´Ð¾Ð¼ÐµÐ½Ð°:
1. Ð’Ð¾Ð¹Ð´Ð¸Ñ‚Ðµ Ð² Ð¿Ð°Ð½ÐµÐ»ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ TimeWeb
2. ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² Ñ€Ð°Ð·Ð´ÐµÐ» "Ð”Ð¾Ð¼ÐµÐ½Ñ‹"
3. ÐÐ°Ð¹Ð´Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ Ð´Ð¾Ð¼ÐµÐ½ Ð¸ Ð½Ð°Ð¶Ð¼Ð¸Ñ‚Ðµ "Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ"
4. ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² Ñ€Ð°Ð·Ð´ÐµÐ» "DNS-Ð·Ð°Ð¿Ð¸ÑÐ¸"
5. Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ Ð·Ð°Ð¿Ð¸ÑÐ¸:

```
Ð¢Ð¸Ð¿: A
Ð˜Ð¼Ñ: @
Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ: IP_Ð°Ð´Ñ€ÐµÑ_Ð²Ð°ÑˆÐµÐ³Ð¾_ÑÐµÑ€Ð²ÐµÑ€Ð°
TTL: 3600

Ð¢Ð¸Ð¿: A  
Ð˜Ð¼Ñ: www
Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ: IP_Ð°Ð´Ñ€ÐµÑ_Ð²Ð°ÑˆÐµÐ³Ð¾_ÑÐµÑ€Ð²ÐµÑ€Ð°
TTL: 3600

Ð¢Ð¸Ð¿: CNAME
Ð˜Ð¼Ñ: api
Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ: your-domain.com
TTL: 3600
```

## 2. Ð—Ð°ÐºÐ°Ð· VPS Ð½Ð° TimeWeb

### Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÐ¼Ñ‹Ðµ Ñ…Ð°Ñ€Ð°ÐºÑ‚ÐµÑ€Ð¸ÑÑ‚Ð¸ÐºÐ¸:
- **CPU**: 2 ÑÐ´Ñ€Ð°
- **RAM**: 4 GB
- **SSD**: 40 GB
- **OS**: Ubuntu 22.04 LTS
- **Ð¢Ñ€Ð°Ñ„Ð¸Ðº**: Ð‘ÐµÐ·Ð»Ð¸Ð¼Ð¸Ñ‚Ð½Ñ‹Ð¹

### Ð¨Ð°Ð³ 1: Ð—Ð°ÐºÐ°Ð· VPS
1. Ð’ Ð¿Ð°Ð½ÐµÐ»Ð¸ TimeWeb Ð¿ÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² "VPS/VDS"
2. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ "Ð—Ð°ÐºÐ°Ð·Ð°Ñ‚ÑŒ VPS"
3. Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ:
   - Ð¢Ð°Ñ€Ð¸Ñ„: VPS-2 Ð¸Ð»Ð¸ Ð²Ñ‹ÑˆÐµ
   - ÐžÐ¡: Ubuntu 22.04 LTS
   - Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¾Ð¿Ñ†Ð¸Ð¸: Backup (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)
4. ÐžÑ„Ð¾Ñ€Ð¼Ð¸Ñ‚Ðµ Ð·Ð°ÐºÐ°Ð·

### Ð¨Ð°Ð³ 2: ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°
ÐŸÐ¾ÑÐ»Ðµ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ VPS Ð²Ñ‹ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ:
- IP-Ð°Ð´Ñ€ÐµÑ ÑÐµÑ€Ð²ÐµÑ€Ð°
- Ð›Ð¾Ð³Ð¸Ð½: root
- ÐŸÐ°Ñ€Ð¾Ð»ÑŒ (Ð² Ð¿Ð¸ÑÑŒÐ¼Ðµ Ð¸Ð»Ð¸ SMS)

## 3. ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð°

### Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 1: Let's Encrypt (Ð‘ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ñ‹Ð¹, Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)
```bash
# ÐŸÐ¾ÑÐ»Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ ÑÐµÑ€Ð²ÐµÑ€Ð° Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ:
sudo certbot --nginx -d your-domain.com -d www.your-domain.com
```

### Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 2: SSL Ð¾Ñ‚ TimeWeb (ÐŸÐ»Ð°Ñ‚Ð½Ñ‹Ð¹)
1. Ð’ Ð¿Ð°Ð½ÐµÐ»Ð¸ TimeWeb Ð¿ÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² "SSL-ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ñ‹"
2. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ "Ð—Ð°ÐºÐ°Ð·Ð°Ñ‚ÑŒ SSL"
3. Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ‚Ð¸Ð¿ ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð°:
   - **DV SSL** - Ð±Ð°Ð·Ð¾Ð²Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð´Ð¾Ð¼ÐµÐ½Ð° (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)
   - **OV SSL** - Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¸
   - **EV SSL** - Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð½Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ°
4. Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ Ð´Ð¾Ð¼ÐµÐ½
5. Ð¡Ð»ÐµÐ´ÑƒÐ¹Ñ‚Ðµ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸ÑÐ¼ Ð¿Ð¾ Ð²ÐµÑ€Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ð¸

## 4. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð¿Ð¾Ñ‡Ñ‚Ñ‹ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)

### Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¿Ð¾Ñ‡Ñ‚Ð¾Ð²Ð¾Ð³Ð¾ ÑÑ‰Ð¸ÐºÐ°
1. Ð’ Ð¿Ð°Ð½ÐµÐ»Ð¸ TimeWeb Ð¿ÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² "ÐŸÐ¾Ñ‡Ñ‚Ð°"
2. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ "Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¿Ð¾Ñ‡Ñ‚Ð¾Ð²Ñ‹Ð¹ ÑÑ‰Ð¸Ðº"
3. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÑÑ‰Ð¸ÐºÐ¸:
   - `noreply@your-domain.com` - Ð´Ð»Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ñ… ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹
   - `admin@your-domain.com` - Ð´Ð»Ñ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ñ… Ð·Ð°Ð´Ð°Ñ‡
   - `support@your-domain.com` - Ð´Ð»Ñ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹

### ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ SMTP Ð´Ð»Ñ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ:
```env
SMTP_HOST=smtp.timeweb.ru
SMTP_PORT=587
SMTP_USER=noreply@your-domain.com
SMTP_PASSWORD=your_email_password
```

## 5. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ñ€ÐµÐ·ÐµÑ€Ð²Ð½Ð¾Ð³Ð¾ ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ

### ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ backup Ð½Ð° TimeWeb
1. Ð’ Ð¿Ð°Ð½ÐµÐ»Ð¸ VPS Ð½Ð°Ð¹Ð´Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ ÑÐµÑ€Ð²ÐµÑ€
2. ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² "Ð ÐµÐ·ÐµÑ€Ð²Ð½Ñ‹Ðµ ÐºÐ¾Ð¿Ð¸Ð¸"
3. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ðµ backup'Ð¾Ð²:
   - Ð§Ð°ÑÑ‚Ð¾Ñ‚Ð°: Ð•Ð¶ÐµÐ´Ð½ÐµÐ²Ð½Ð¾
   - Ð’Ñ€ÐµÐ¼Ñ: 03:00 (Ð½Ð¾Ñ‡Ð½Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ)
   - Ð¥Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ: 7 Ð´Ð½ÐµÐ¹

### Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ backup Ð² Ð¾Ð±Ð»Ð°ÐºÐ¾
```bash
# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ rclone Ð´Ð»Ñ backup Ð² Ð¾Ð±Ð»Ð°Ñ‡Ð½Ñ‹Ðµ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð°
curl https://rclone.org/install.sh | sudo bash

# ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ backup ÑÐºÑ€Ð¸Ð¿Ñ‚
sudo tee /usr/local/bin/backup-to-cloud.sh > /dev/null <<'EOF'
#!/bin/bash
DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_DIR="/tmp/backup_$DATE"

# Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ backup'Ð°
mkdir -p $BACKUP_DIR
docker-compose -f /opt/printing-platform/docker-compose.prod.yml exec -T postgres pg_dump -U postgres printing_platform_prod > $BACKUP_DIR/database.sql
tar -czf $BACKUP_DIR/uploads.tar.gz -C /opt/printing-platform uploads/
tar -czf $BACKUP_DIR/config.tar.gz -C /opt/printing-platform .env docker-compose.prod.yml

# ÐžÑ‚Ð¿Ñ€Ð°Ð²ÐºÐ° Ð² Ð¾Ð±Ð»Ð°ÐºÐ¾ (Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ rclone)
# rclone copy $BACKUP_DIR remote:backups/

# ÐžÑ‡Ð¸ÑÑ‚ÐºÐ°
rm -rf $BACKUP_DIR
EOF

chmod +x /usr/local/bin/backup-to-cloud.sh

# Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð² crontab
echo "0 2 * * * /usr/local/bin/backup-to-cloud.sh" | crontab -
```

## 6. ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð¸ Ð°Ð»ÐµÑ€Ñ‚Ñ‹

### ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ð¹ Ð² Telegram
1. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð±Ð¾Ñ‚Ð° Ð´Ð»Ñ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð° Ñ‡ÐµÑ€ÐµÐ· @BotFather
2. ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ Ñ‚Ð¾ÐºÐµÐ½ Ð±Ð¾Ñ‚Ð° Ð¸ Ð²Ð°Ñˆ chat_id
3. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð°:

```bash
sudo tee /usr/local/bin/monitoring.sh > /dev/null <<'EOF'
#!/bin/bash
BOT_TOKEN="YOUR_MONITORING_BOT_TOKEN"
CHAT_ID="YOUR_CHAT_ID"
DOMAIN="your-domain.com"

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ÑÑ‚Ð¸ ÑÐ°Ð¹Ñ‚Ð°
if ! curl -f https://$DOMAIN/health > /dev/null 2>&1; then
    MESSAGE="ðŸš¨ ALERT: $DOMAIN is DOWN!"
    curl -s "https://api.telegram.org/bot$BOT_TOKEN/sendMessage" \
         -d "chat_id=$CHAT_ID" \
         -d "text=$MESSAGE"
fi

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð´Ð¸ÑÐºÐ°
DISK_USAGE=$(df / | awk 'NR==2 {print $5}' | sed 's/%//')
if [ $DISK_USAGE -gt 80 ]; then
    MESSAGE="âš ï¸ WARNING: Disk usage is ${DISK_USAGE}% on $DOMAIN"
    curl -s "https://api.telegram.org/bot$BOT_TOKEN/sendMessage" \
         -d "chat_id=$CHAT_ID" \
         -d "text=$MESSAGE"
fi

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¿Ð°Ð¼ÑÑ‚Ð¸
MEMORY_USAGE=$(free | awk 'NR==2{printf "%.0f", $3*100/$2}')
if [ $MEMORY_USAGE -gt 90 ]; then
    MESSAGE="âš ï¸ WARNING: Memory usage is ${MEMORY_USAGE}% on $DOMAIN"
    curl -s "https://api.telegram.org/bot$BOT_TOKEN/sendMessage" \
         -d "chat_id=$CHAT_ID" \
         -d "text=$MESSAGE"
fi
EOF

chmod +x /usr/local/bin/monitoring.sh

# Ð—Ð°Ð¿ÑƒÑÐº ÐºÐ°Ð¶Ð´Ñ‹Ðµ 5 Ð¼Ð¸Ð½ÑƒÑ‚
echo "*/5 * * * * /usr/local/bin/monitoring.sh" | crontab -
```

## 7. ÐžÐ¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸

### ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° swap Ñ„Ð°Ð¹Ð»Ð°
```bash
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab
```

### ÐžÐ¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ Docker
```bash
# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ñ„Ð°Ð¹Ð» ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸ Docker
sudo tee /etc/docker/daemon.json > /dev/null <<'EOF'
{
  "log-driver": "json-file",
  "log-opts": {
    "max-size": "10m",
    "max-file": "3"
  },
  "storage-driver": "overlay2"
}
EOF

sudo systemctl restart docker
```

## 8. Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ

### ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ñ„Ð°Ð¹Ñ€Ð²Ð¾Ð»Ð°
```bash
# Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð°
sudo ufw default deny incoming
sudo ufw default allow outgoing
sudo ufw allow ssh
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw enable

# ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ðµ SSH (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)
sudo ufw limit ssh
```

### ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° fail2ban
```bash
sudo tee /etc/fail2ban/jail.local > /dev/null <<'EOF'
[DEFAULT]
bantime = 3600
findtime = 600
maxretry = 3

[sshd]
enabled = true
port = ssh
filter = sshd
logpath = /var/log/auth.log
maxretry = 3

[nginx-http-auth]
enabled = true
filter = nginx-http-auth
port = http,https
logpath = /var/log/nginx/error.log

[nginx-limit-req]
enabled = true
filter = nginx-limit-req
port = http,https
logpath = /var/log/nginx/error.log
maxretry = 10
EOF

sudo systemctl restart fail2ban
```

## 9. Ð¡Ñ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ð¸ Ð¿Ð»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð±ÑŽÐ´Ð¶ÐµÑ‚Ð°

### ÐŸÑ€Ð¸Ð¼ÐµÑ€Ð½Ñ‹Ðµ Ñ€Ð°ÑÑ…Ð¾Ð´Ñ‹ Ð½Ð° TimeWeb (Ð² Ð¼ÐµÑÑÑ†):
- **Ð”Ð¾Ð¼ÐµÐ½ .com**: ~800 Ñ€ÑƒÐ±/Ð³Ð¾Ð´ (67 Ñ€ÑƒÐ±/Ð¼ÐµÑ)
- **VPS-2 (2 CPU, 4GB RAM, 40GB SSD)**: ~1200 Ñ€ÑƒÐ±/Ð¼ÐµÑ
- **SSL DV**: ~1500 Ñ€ÑƒÐ±/Ð³Ð¾Ð´ (125 Ñ€ÑƒÐ±/Ð¼ÐµÑ) Ð¸Ð»Ð¸ Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð¾ Let's Encrypt
- **Backup**: ~300 Ñ€ÑƒÐ±/Ð¼ÐµÑ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)

**Ð˜Ñ‚Ð¾Ð³Ð¾**: ~1500-1700 Ñ€ÑƒÐ±/Ð¼ÐµÑ

### ÐÐ»ÑŒÑ‚ÐµÑ€Ð½Ð°Ñ‚Ð¸Ð²Ð½Ñ‹Ðµ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ñ‹:
- **Ð‘Ð¾Ð»ÐµÐµ Ð¼Ð¾Ñ‰Ð½Ñ‹Ð¹ VPS**: VPS-4 (~2500 Ñ€ÑƒÐ±/Ð¼ÐµÑ)
- **Dedicated ÑÐµÑ€Ð²ÐµÑ€**: Ð¾Ñ‚ 5000 Ñ€ÑƒÐ±/Ð¼ÐµÑ
- **Managed hosting**: Ð¾Ñ‚ 3000 Ñ€ÑƒÐ±/Ð¼ÐµÑ

## 10. ÐšÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ñ‹ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸ TimeWeb

- **Ð¢ÐµÑ…Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°**: support@timeweb.ru
- **Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½**: 8 (800) 700-06-08
- **ÐžÐ½Ð»Ð°Ð¹Ð½-Ñ‡Ð°Ñ‚**: Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½ Ð² Ð¿Ð°Ð½ÐµÐ»Ð¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ
- **Telegram**: @timeweb_support

## Ð§ÐµÐº-Ð»Ð¸ÑÑ‚ Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ

- [ ] Ð”Ð¾Ð¼ÐµÐ½ ÐºÑƒÐ¿Ð»ÐµÐ½ Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½
- [ ] VPS Ð·Ð°ÐºÐ°Ð·Ð°Ð½ Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½
- [ ] DNS Ð·Ð°Ð¿Ð¸ÑÐ¸ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ñ‹
- [ ] SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½
- [ ] ÐŸÑ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ñ€Ð°Ð·Ð²ÐµÑ€Ð½ÑƒÑ‚Ð¾
- [ ] ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½
- [ ] Backup Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½
- [ ] Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð°
- [ ] ÐŸÑ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð°
- [ ] Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð°